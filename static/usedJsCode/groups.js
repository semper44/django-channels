let e="django-channels-byf5.onrender.com",t=(document.querySelector("#groupsearchButton"),document.querySelectorAll(".approvepost")),o=document.querySelectorAll(".trash"),n=document.querySelectorAll(".declinepost"),r=document.querySelector("#group-name").getAttribute("data-content");const a=document.getElementById("groupcoverpictureInput"),s=(document.getElementById("groupcameraIconLabel"),document.getElementById("groupcameraIcon"),document.getElementById("groupimagePreview")),i=document.getElementById("groupPreviewImage"),l=document.getElementById("groupsubmitButton"),d=document.getElementById("groupcancelButton"),c=document.querySelector('[name="csrfmiddlewaretoken"]').value;a&&a.addEventListener("change",(function(){const t=a.files[0];if(t){const e=new FileReader;e.onload=function(e){i.src=e.target.result,s.style.display="block",l.style.display="block",d.style.display="block"},e.readAsDataURL(t)}l&&(l.onclick=async o=>{const n=new FormData;n.append("cover_photo",t);(await fetch(`${e}/change_group_cover_picture/${r}/`,{method:"POST",body:n,headers:{"X-CSRFToken":c}})).ok?(window.location.reload(),Toastify({text:"Successful",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()):Toastify({text:"Something went wrong, try again later",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}),d&&(d.onclick=function(e){a.value="",s.style.display="none",l.style.display="none",d.style.display="none"})})),postbutton.style.paddingBottom="10px",postbutton.style.borderBottom="4px solid #0d2438",t.forEach((t=>{t.addEventListener("click",(async o=>{const n=t.getAttribute("data-postid"),r=t.getAttribute("data-groupid"),a=new FormData(document.querySelector("#groupcreatepostform"));if((await fetch(`${e}/approve_post/${r}/${n}/`,{method:"POST",body:a,headers:{"X-CSRFToken":"{{ csrf_token }}"}})).ok){t.style.display="none",t.nextElementSibling.style.display="none";let e=document.createElement("h1");e.innerHTML="Approved",e.style.color="#16a34a";t.parentElement;t.parentElement.append(e),Toastify({text:"Post approved successfully ",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}else Toastify({text:"Post unappproved, please try again later ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}))})),o.forEach((t=>{t.addEventListener("click",(async o=>{const n=t.querySelector(".trashchild").getAttribute("data-postid"),r=t.querySelector(".trashchild").getAttribute("data-groupid"),a=new FormData(document.querySelector("#groupcreatepostform")),s=(document.querySelector("#postcontent"),await fetch(`${e}/delete_group_post/${r}/${n}/`,{method:"POST",body:a,headers:{"X-CSRFToken":"{{ csrf_token }}"}})),i=await s.json();if(!0===s.ok&&"true"===i.success){if(console.log(t.parentElement.parentElement.parentElement.childElementCount),console.log(t.parentElement.parentElement.childElementCount),t.parentElement.parentElement.parentElement.childElementCount<2){let e=document.createElement("p");e.innerHTML="No feeds to fetch",e.classList.add("h-screen","w-full","bg-base-lightbg","dark:bg-base-darkbg","text-[#0d2438]","dark:text-white","text-center");document.querySelector("#postcontent").append(e)}t.parentElement.parentElement.style.display="none",Toastify({text:"Post deleted ",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}else Toastify({text:"Error, please try again later ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}))})),n.forEach((t=>{t.addEventListener("click",(async o=>{const n=t.getAttribute("data-postid"),r=t.getAttribute("data-groupid"),a=new FormData(document.querySelector("#groupcreatepostform"));if(!0===(await fetch(`${e}/delete_group_post/${r}/${n}/`,{method:"POST",body:a,headers:{"X-CSRFToken":"{{ csrf_token }}"}})).ok){t.style.display="none",t.previousElementSibling.style.display="none";let e=document.createElement("h1");e.innerHTML="Declined",e.style.color="#16a34a";t.parentElement;t.parentElement.append(e),Toastify({text:"Post declined ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}else Toastify({text:"Error, please try again later ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}))}));