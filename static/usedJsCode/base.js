let e="https://django-channels-byf5.onrender.com";const t=document.querySelector("#topsearchButton"),n=(document.querySelector("#modal"),document.querySelector("#submit"),document.querySelector("#groupcancel")),o=document.querySelector("#creategroupmodal"),l=document.querySelector("#grouppagecreategroup"),s=document.querySelector("#searchmodal"),r=document.querySelector("#searchmodalparent"),c=document.querySelector("#searchmodalcancel");let a="https://django-channels-byf5.onrender.com";t.addEventListener("input",(t=>{clearTimeout(undefined),typingTimer=setTimeout((async()=>{t.preventDefault(),r.style.display="block";const n=new FormData(document.querySelector("#topsearchButtonform")),o=new URLSearchParams(n),l="https://django-channels-byf5.onrender.com/search?"+o.toString(),i=await fetch(l,{method:"GET",headers:{"X-CSRFToken":"{{ csrf_token }}"}}),c=await i.json();if(s.innerHTML="",c.results.length>=1){c.results.slice(0,3).forEach((t=>{let n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),i=document.createElement("img"),r=document.createElement("p"),c=document.createElement("p"),a=document.createElement("p");document.createElement("p");n.style.width="80%",n.style.padding="1.5rem 0",n.style.height="fit-content",n.style.position="relative",n.style.borderRadius="10px",n.style.minHeight="108px",i.style.width="60px",i.style.height="60px",i.style.borderRadius="50%",i.style.position="absolute",i.style.left="4%",i.style.zIndex="20",r.style.color="limegreen",r.style.width="100%",r.style.textAlign="center",c.style.color="white",c.style.width="100%",c.style.textAlign="center",a.style.height="fit-content",a.style.width="fit-content",a.style.padding="5px",a.style.color="white",a.style.borderRadius="5px",a.style.backgroundColor="limegreen",a.style.zIndex="20",a.style.marginTop="8px",a.style.cursor="pointer",a.innerHTML="View",l.style.display="grid",l.style.backgroundColor="black",l.style.opacity="0.4",l.style.backdropFilter="blur(2px)",l.style.position="absolute",l.style.bottom="0",l.style.width="100%",l.style.height="50%",l.style.borderRadius="5px",l.style.paddingBottom="3x",n.style.background="white",t.prof_pics&&t.username?(c.innerHTML=t.bio,r.innerHTML=t.username,i.src=t.prof_pics,n.append(i),a.onclick=function(){window.location.href=`${e}/profile/${t.username}/ `}):t.prof_pics&&t.owner?(r.innerHTML=t.content,a.onclick=function(){window.location.href=`${e}/comments/${t.slug}/ `}):(r.innerHTML=t.name,i.src=t.photo,n.append(i),a.onclick=function(){window.location.href=`${e}/group-view/${t.name}/ `}),l.append(r),l.append(c),o.append(a),o.style.position="absolute",o.style.right="4%",o.style.top="6%",o.style.zIndex="10",n.append(o),n.append(l),s.append(n)}));let t=document.createElement("p");t.innerHTML="See all",t.style.marginTop="1rem",t.style.width="75%",t.style.backgroundColor="white",t.style.color="#0d2438",t.style.textAlign="center",t.style.cursor="pointer",t.style.border="1px solid #00cc66",t.style.padding="0.5rem 0",t.style.borderRadius="10px",t.style.color="#0d2438",s.append(t),t.addEventListener("mouseenter",(function(){t.style.backgroundColor="#16a34a",t.style.color="white"})),t.addEventListener("mouseleave",(function(){t.style.backgroundColor="white",t.style.color="#0d2438"})),t.addEventListener("click",(async e=>{o.toString();window.location.href='{% url "search_view_template" %}?'+o.toString()}))}else s.innerHTML="Search not found"}))})),c.addEventListener("click",(e=>{s.innerHTML="",r.style.display="none"})),n.addEventListener("click",(()=>{o.style.display="none"})),l&&l.addEventListener("click",(()=>{o.style.display="block"}));const d=document.querySelector("body"),u=document.querySelector("#ball"),y=document.querySelector("#ball2"),p=(document.querySelector("#leftnav"),localStorage.getItem("mode"));null!==p?(d.classList.add(p),"light"===p?(u.classList.add("balllight"),y.classList.add("balllight")):(u.classList.add("balldark"),y.classList.add("balldark"))):(u.classList.add("balllight"),y.classList.add("balllight"));const m=()=>{d.classList.toggle("dark");const e=d.classList.contains("dark")?"dark":"light";if(localStorage.setItem("mode",e),"light"===e){u.classList.remove("balldark"),u.classList.add("balllight"),y.classList.remove("balldark"),y.classList.add("balllight");let e=document.querySelectorAll("#findfrienddivbg");for(let t of e)t.style.backgroundColor="white";let t=document.querySelectorAll("#frienddivbg");for(let e of t)e.style.backgroundColor="white"}else{u.classList.remove("balllight"),u.classList.add("balldark"),y.classList.remove("balllight"),y.classList.add("balldark");let e=document.querySelectorAll("#findfrienddivbg");for(let t of e)t.style.backgroundColor="#1D2833";let t=document.querySelectorAll("#frienddivbg");for(let e of t)e.style.backgroundColor="#1D2833"}};u&&(u.addEventListener("click",m),y.addEventListener("click",m));const g=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws/home/`;document.querySelector("#online");let f=document.querySelector("#online-people");const h=document.querySelector("#chat-chat"),b=document.querySelector("#messageStore"),w=(document.querySelector("#img"),document.querySelector("#baseuserid").innerHTML),S=document.querySelector("#chat"),k=document.querySelector("#sendiv"),v=(document.querySelector("#online"),document.querySelector("form"),document.querySelector("#realtimemessgcontainer"),document.querySelector("#realtimemessg")),q=document.querySelector("#onlinechat"),x=document.querySelector("#backarrow"),T=document.querySelector("#onlinechatbutton"),E=document.querySelector("#logout"),L=document.querySelector('[name="csrfmiddlewaretoken"]').value,_=new WebSocket(g),H=document.querySelector("#baseuserid").getAttribute("data-id");let M;M=null!=localStorage.getItem("notificationadd")?localStorage.getItem("notificationadd"):0;let C=document.querySelector("#bellicon2");const I=document.querySelector("#bellicon");let R,O,j,F,A=I.innerHTML;const P=localStorage.getItem("count");let N,D,W,B=document.querySelector("#messagenotif2"),J=document.querySelector("#profile_message"),X=document.querySelector("#suggestions"),z=new XMLHttpRequest,G=`${e}/findfriends/`;function U(){let e,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;x&&(e=x.getAttribute("state")),v&&q&&(t<640&&null===e||t<640&&"false"===e?(q.style.display="block",v.style.display="none"):(q.style.display="none",v.style.display="block")),q&&t>640&&(q.style.display="block")}function V(){b.scrollTop=b.scrollHeight}z.open("GET",G,!0),z.setRequestHeader("Content-Type","application/json"),z.onreadystatechange=function(){if(z.readyState===XMLHttpRequest.DONE&&200===z.status){if(baseresponse=JSON.parse(z.responseText),baseresponse.find_friends.slice(0,3).forEach((e=>{if(baseresponse.sent.includes(e.username)||baseresponse.received.includes(e.username));else if(""!==e.username){let t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("img"),s=document.createElement("p"),i=document.createElement("p"),r=document.createElement("p"),c=document.createElement("p");t.style.width="80%",t.style.padding="1.5rem 0",t.style.height="fit-content",t.style.position="relative",t.style.backgroundColor="transparent",t.style.border="0.8px solid #635a5aab",t.style.borderRadius="10px",t.style.minHeight="108px",l.src=e.pics,l.style.width="60px",l.style.height="60px",l.style.borderRadius="50%",l.style.position="absolute",l.style.left="4%",l.style.zIndex="20",t.append(l),s.innerHTML=e.username,s.style.color="white",s.style.width="100%",s.style.textAlign="center",i.innerHTML="item.bio",i.style.color="white",i.style.width="100%",i.style.textAlign="center",c.innerHTML="Add",r.innerHTML="View",c.style.height="fit-content",c.style.width="fit-content",c.style.padding="5px",c.style.color="white",c.style.backgroundColor="limegreen",c.style.borderRadius="5px",c.style.cursor="pointer",r.style.height="fit-content",r.style.width="fit-content",r.style.padding="5px",r.style.color="white",r.style.borderRadius="5px",r.style.backgroundColor="limegreen",r.style.zIndex="20",r.style.marginTop="8px",r.style.cursor="pointer",r.onclick=function(){window.location.href=`${a}/profile/${e.username}/ `},c.onclick=function(){window.location.href=`${a}/addfriends/${e.username}/ `},o.style.display="grid",o.style.backgroundColor="black",o.style.opacity="0.4",o.style.backdropFilter="blur(2px)",o.style.position="absolute",o.style.bottom="0",o.style.width="100%",o.style.height="50%",o.style.borderRadius="5px",o.style.paddingBottom="3x",o.append(s),o.append(i),n.append(c),n.append(r),n.style.position="absolute",n.style.right="4%",n.style.top="6%",n.style.zIndex="10",t.append(n),t.append(o),X.append(t)}R=e.notif,O=e.logout_notification,j=e.logout_message_notification,F=e.message_notif})),null!==P||void 0!==P?(N=P,+P>0&&(B.style.display="block")):N=0,N>=1||+F>=1||+j>=1){let e=document.querySelector("#messagenotif"),t=+N+ +F+ +j;null!==e&&(e.innerHTML=t,e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",localStorage.setItem("count",t)),null!==B&&(B.innerHTML=+N+ +F,B.style.color="white",B.style.display="flex",B.style.justifyContent="center",B.style.alignItems="center")}if(C&&(C.style.display="none"),I&&(I.style.display="none"),null!==M)D=+M+ +R,localStorage.setItem("notificationadd",D),I&&(I.innerHTML=D),C&&(C.innerHTML=D);else{let e=+O+ +R;e>0&&(D=+e,I&&(I.innerHTML=e),C&&(C.innerHTML=e)),localStorage.setItem("notificationadd",D)}D<=0?(I&&(I.style.display="none"),C&&(C.style.display="none")):(I&&(I.style.display="flex"),C&&(C.style.display="flex"));let t=new XMLHttpRequest;t.open("GET",`${e}/reset_notif/`,!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&(response=JSON.parse(t.responseText))},t.send();let n=document.querySelector("#bellicon2container");n&&(n.onclick=function(){localStorage.removeItem("notificationadd"),C.style.display="none"});let o=document.querySelector("#belliconcontainer");o&&(o.onclick=function(){localStorage.removeItem("notificationadd"),I.style.display="none"})}},z.send(),W="dark"===localStorage.getItem("mode")?"dark":"light",U(),window.addEventListener("resize",(function(){U()})),x&&(x.onclick=function(){x.setAttribute("state","false"),v.style.display="none",q.style.display="block",T.style.display="flex"});let Y,K=null;function Q(e){let t=new XMLHttpRequest;t.open("GET",`${a}/chat/${e}`,!0),t.setRequestHeader("Content-Type","application/json"),t.onerror=function(){},t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&200===t.status){response=JSON.parse(t.responseText);let e=JSON.parse(response.context);if(response.context)for(i of e){const e=Object.keys(i)[0],t=i[e];let n=document.createElement("p");b.style.opacity="1",n.style.width="fit-content",n.style.padding="3px 10px",n.style.marginTop="1rem",n.style.borderRadius="10px",n.innerHTML=t,e===w?(n.style.alignSelf="flex-end",n.style.backgroundColor="green",n.style.color="white"):(n.style.color="white",n.style.backgroundColor="#597d35"),b.appendChild(n),V()}}},t.send()}function Z(e,t,n){const o=document.querySelector("#leftnavusername");let l=document.querySelector("#realtimemessg"),s=document.querySelector("#onlinechat"),r=document.querySelector("#backarrow"),c=new Date,a=c.getDate(),d=c.getMonth(),u=(c.getFullYear(),c.getHours()),y=c.getMinutes(),p=a+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d]+" "+u+":"+(y<10?"0":"")+y;null!==b&&(b.style.opacity="1");let m=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;J||(m<=640&&null!==s&&null!==r&&null!==l?(s.style.display="none",l.style.display="block",l.style.width="100%",r.setAttribute("state","true")):(s.style.display="block",r.setAttribute("state","false"))),null!==K&&K.readyState===WebSocket.OPEN&&K.close();const g=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}+ /ws/messages/${t}/${n}/ `;if(K=new WebSocket(g),K.onmessage=function(e){!function(e,t){if("chat_message"===e.type&&e.receiver===w){let t=document.createElement("div"),n=document.createElement("p");n.innerHTML=e.time,n.style.color="gray",n.style.display="none",n.style.fontSize="12px";let o=document.createElement("p");o.style.width="fit-content",o.style.padding="3px 10px",o.style.marginTop="1rem",o.style.borderRadius="10px",e.receiver===w?(o.style.color="white",o.style.backgroundColor="#597d35",t.style.alignSelf="flex-start",t.appendChild(o),t.appendChild(n)):t.style.float="right",o.onclick=()=>{n.style.display="block"},o.innerHTML=e.message,b&&(b.appendChild(t),V())}if("same_message"===e.type){ne(e.online);let t=document.createElement("p"),n=document.createElement("div"),o=document.createElement("p");o.innerHTML=e.time,o.style.color="gray",o.style.display="none",o.style.fontSize="12px",t.style.width="fit-content",t.style.padding="3px 10px",t.style.color="black",t.style.marginTop="1rem",t.style.borderRadius="10px",e.receiver!==w&&(t.style.backgroundColor="green",t.style.color="white",t.style.alignSelf="flex-end",t.style.float="right",n.appendChild(t),n.appendChild(o)),t.onclick=()=>{o.style.display="block"},t.innerHTML=e.message,b.appendChild(n),V()}}(JSON.parse(e.data))},K.onclose=function(e){console.error("Chat socket closed unexpectedly")},null!==document.querySelector("#message")){let e;document.querySelector("#message").focus(),document.querySelector("#message").onkeyup=function(e){"Enter"===e.key&&document.querySelector("#chat-message-submit").click()},document.querySelector("#message").oninput=function(e){K.send(JSON.stringify({message:"message",user:o.innerHTML,receiver:n,receiverProfile:i,type:"typing"}))},document.querySelector("#message").onblur=function(t){clearTimeout(e);const o=document.querySelector("#leftnavusername");K.send(JSON.stringify({message:"message",user:o.innerHTML,receiver:n,receiverProfile:i,type:"canceltyping"}))}}null!==document.querySelector("#chat-message-submit")&&(document.querySelector("#chat-message-submit").onclick=function(e){const t=document.querySelector("#message"),o=document.querySelector("#leftnavusername"),l=t.value;K.send(JSON.stringify({message:l,user:o.innerHTML,receiver:n,receiverProfile:i,time:p,type:"instantmessage"})),t.value=""});let f=document.querySelector("#profilemessage");null!==f&&(f.focus(),f.onkeyup=function(e){"Enter"===e.key&&document.querySelector("#profilechat-message-submit").click()}),null!==document.querySelector("#profilechat-message-submit")&&(document.querySelector("#profilechat-message-submit").onclick=function(e){const t=f.value;let n=J.getAttribute("sender"),o=J.getAttribute("receiver");K.send(JSON.stringify({message:t,user:n,receiver:o,receiverProfile:o,time:p,type:"instantmessage"})),f.value=""})}S&&(S.onmouseover=function(){S.style.opacity="0.4"},S.onmouseout=function(){S.style.opacity="1"}),k&&(k.onmouseover=function(){k.style.opacity="0.4",k.style.cursor="pointer"},k.onmouseout=function(){k.style.opacity="1"}),J&&(J.onclick=function(e,t,n){let o=J.getAttribute("sender"),l=J.getAttribute("receiver");document.querySelector("#profile_message_input").style.display="block",Z(0,o,l)});let ee=document.querySelector("#profilemessagecancel");function te(e,t,n){let o=document.createElement("div"),l=document.createElement("div"),s=document.createElement("p"),r=document.createElement("p");r.setAttribute("id","messagebody");let c=document.createElement("img");if(c.setAttribute("id",`${t}`),s.style.opacity="0.9",c.style.height="50px",c.style.width="50px",c.style.borderRadius="50%",o.style.position="relative",o.classList.add(`biggerCircle-${t}`),o.style.width="fit-content",n.style.cursor="pointer",n.style.height="fit-content",n.style.width="fit-content",n.style.width="100%",n.style.display="flex",n.style.marginTop="1rem",n.style.gap="20px",n.style.alignItems="center",e.includes(t)){let e=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div");e.style.width="10px",e.style.height="10px",e.style.borderRadius="50%",e.style.backgroundColor="lime",n.classList.add(`container-${t}`),n.style.width="15px",n.style.height="15px",n.style.borderRadius="50%",n.style.backgroundColor="black",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",l.style.position="absolute",l.style.right="-6%",l.style.top="50%",l.style.transform="translate(50%, -50%)",n.appendChild(e),l.appendChild(n),o.appendChild(l)}s.innerHTML=t,r.innerHTML=i.message,Y=i.message,c.src=i.pics,o.append(c),n.append(o),l.append(s),l.append(r),n.append(o),n.append(l),n.onmouseover=function(){n.style.opacity="0.4"},n.onmouseout=function(){n.style.opacity="1"}}function ne(t){let n;h&&(h.innerHTML="");let o=new XMLHttpRequest;o.open("GET",`${e}/selfmessages/`,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){try{n=JSON.parse(o.responseText)}catch{n=Jxhr.responseText}for(i of n.messages){let e;const n=document.querySelector("#baseuserid").innerHTML;e=i.username===n?i.sender:i.username;let o=document.createElement("div");te(t,e,o),h&&h.append(o),o.onclick=t=>{b.innerHTML="",Q(e),Z(0,n,e)}}}},o.send()}ee&&(ee.style.marginRight="6%",ee.style.cursor="pointer",ee.onclick=function(){document.querySelector("#profile_message_input").style.display="none"}),_.onmessage=function(e){let t=JSON.parse(e.data);if("send_like_message"===t.type){A++,null!==bellicon&&(document.querySelector("#bellicon").innerHTML=A),null!==C&&(C.innerHTML=A,C.style.display="flex"),document.querySelector("#bellicon").style.display="flex";let e=localStorage.getItem("notificationadd");if(null===e){let e=0;e++,localStorage.setItem("notificationadd",e)}else e=+e+1,localStorage.setItem("notificationadd",e)}if("send_add_message"===t.type){let e=document.querySelector("#bellicon").innerHTML;e++,document.querySelector("#bellicon").innerHTML=e,C.innerHTML=e,document.querySelector("#bellicon").style.display="flex";let t=localStorage.getItem("notificationadd");if(null===t){let e=0;e++,localStorage.setItem("notificationadd",e)}else t=+t+1,localStorage.setItem("notificationadd",t)}function n(e,t,n){const o=document.querySelector("#baseuserid").innerHTML;let l=document.createElement("div"),s=document.createElement("div"),i=document.createElement("p");i.classList.add("onlineusernames"),i.innerHTML=t;let r=document.createElement("img");r.src=n,i.style.opacity="0.9",r.style.height="50px",r.style.width="50px",r.style.borderRadius="50%",s.style.position="relative";let c=document.createElement("div");c.style.width="10px",c.style.height="10px",c.style.borderRadius="50%",c.style.backgroundColor="lime";let a=document.createElement("div");a.style.width="15px",a.style.height="15px",a.style.borderRadius="50%",a.style.backgroundColor="white",a.style.position="absolute",a.style.right="-6%",a.style.top="50%",a.style.display="flex",a.style.justifyContent="center",a.style.alignItems="center",a.append(c),s.append(a),l.style.cursor="pointer",l.style.height="fit-content",l.style.width="100%",l.style.display="flex",l.style.gap="18px",l.style.alignItems="center",s.append(r),l.append(s),l.append(i),f.append(l),l.onmouseover=function(){l.style.opacity="0.4"},l.onmouseout=function(){l.style.opacity="1"},l.onclick=function(e){b.innerHTML="",Q(t),Z(0,o,t)}}if(f&&"online"===t.type)for(i of(f.innerHTML="",t.message))if(t.friends.includes(i.username)){n(0,i.username,i.pics)}if("send_logout"===t.type){let e=document.querySelectorAll(".onlineusernames"),n=document.querySelector(`.container-${t.sender}`);for(i of(n.style.display="none",e))if(i.innerHTML===t.sender){let e=i.parentElement;i.parentElement.parentElement.removeChild(e)}}if(f&&"send_online"===t.type){f.innerHTML="";const e=t.name;let o=t.pics;document.querySelector("#baseuserid").innerHTML;document.querySelector(`#${e}`);let l=document.querySelector(`.biggerCircle-${e}`),s=document.querySelector(`.container-${e}`);if(null===s){let t=document.createElement("div");t.style.width="10px";let n=document.createElement("div");t.style.height="10px",t.style.borderRadius="50%",t.style.backgroundColor="lime",n.style.width="15px",n.style.height="15px",n.style.borderRadius="50%",n.style.backgroundColor="black",n.style.position="absolute",n.style.right="-6%",n.style.top="50%",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.append(t),n.classList.add(`container-${e}`),l.append(n)}else s.style.display="flex";n(0,e,o)}},E.onclick=async()=>{const t=localStorage.getItem("notificationadd"),n=localStorage.getItem("count");let o=new FormData;null===n&&void 0===n||o.append("offlinemessageNotification",n),o.append("offlineNotification",t);(await fetch(`${e}/logout/`,{method:"POST",body:o,headers:{"X-CSRFToken":L}})).ok&&(window.localStorage.clear(),window.location.href=`${e}/login`,_.send(JSON.stringify({message:`${w} just liked your photo`,receiver:w,type:"loggedout",sender:w})))};const oe=document.querySelector("#logout2");null!==oe&&(oe.onclick=async()=>{const t=localStorage.getItem("notificationadd"),n=localStorage.getItem("count");let o=new FormData;null===n&&void 0===n||o.append("offlinemessageNotification",n),o.append("offlineNotification",t);(await fetch(`${e}/logout/`,{method:"POST",body:o,headers:{"X-CSRFToken":"{{ csrf_token }}"}})).ok&&(window.localStorage.clear(),window.location.href=`${e}/login`,_.send(JSON.stringify({message:`${w} just liked your photo`,receiver:w,type:"loggedout",sender:w})))}),$("#myButton").click((function(){$(".dataparent").empty();let t=`${e}/findfriends/`;$.ajax({url:t,type:"GET",dataType:"json",success:function(t){$("#loadingsequence2").hide();let n=$(".dataparent");if(t.find_friends.length<1){let e=$("<p>").text("No suggestion to fetch"),t=$(".dataparent2"),o=$("<div>");o.css({width:"100%","text-align":"center"}),o.append(e),n.hide(),o.appendTo(t)}else t.find_friends.forEach((function(o){let l=localStorage.getItem("mode");if(o.username){let s=$("<div>");s.attr("id","findfrienddivbg");let i,r=$("<div>");if(l&&(i="light"!==l),s.css({width:"100%",height:"80%",padding:"1rem",display:"flex",gap:"5px","justify-content":"center","align-content":"center","background-color":(i?"#1D2833":"white")+" ","box-shadow":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","border-radius":"10px","margin-top":"1rem","margin-bottom":"1rem","margin-left":"1rem","margin-right":"1rem","transform-origin":"center","transition-property":"transform","transition-duration":"300ms"}),s.hover((function(){$(this).css({"box-shadow":"var(--box-shadow-xl)",transform:"scale(1.05)"})}),(function(){$(this).css({"box-shadow":"var(--box-shadow-lg)",transform:"scale(1)"})})),t.sent.includes(o.username)||t.received.includes(o.username));else{n.show(),$(".dataparent2").hide();let t=$("<p>").text("Add friend");t.css({width:"fit",height:"fit",padding:"6","border-radius":"5px","background-color":"rgb(22 163 74)",color:"rgb(209 213 219)",cursor:"pointer"});let i=$("<p>").text(o.username);"light"===l||null===l?i.css({"font-size":"bold",color:"limegreen"}):i.css({"font-size":"bold",color:"white"});let c=$("<p>").text(o.bio),a=$("<img>");a.attr("src",o.pics),a.attr("alt","Profile Picture"),a.addClass("w-[80px] h-[80px]"),a.attr("height","60px !important"),a.css("border-radius","50%"),r.css({display:"grid",gap:"5px"}),r.append(i),r.append(c),r.append(t),s.append(a),s.append(r),s.appendTo(n);const d=document.querySelector('[name="csrfmiddlewaretoken"]').value;t.click((function(){$.ajax({url:`${e}/addfriends/${o.username}/`,type:"POST",dataType:"json",beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",d)},success:function(e){"ok"==e.success?(Toastify({text:"Request sent",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),t.text("Request sent"),_.send(JSON.stringify({message:`${o.username} sent you a friend request`,receiver:o.username,sender:H,type:"friendrequest"}))):Toastify({text:"Request not sent! try again later",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}})}))}}}))},error:function(e){}})}));const le=document.getElementById("uploadPreview"),se=(document.getElementById("parentmodalpreview"),document.querySelector(".group-file-input-container")),ie=(document.getElementById("modalpreview"),document.getElementById("uploadPreviewImage")),re=document.getElementById("uploadsubmitButton"),ce=document.getElementById("uploadcancelButton");function ae(e,t,n,o,l,s,i,r,c){const a=new FileReader;let d=e.target.files[0],u=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;d&&(a.onload=function(e){t.src=e.target.result,o.style.display="block",u.style.display="none"},a.readAsDataURL(d)),l.onclick=function(e){t.value="",o.style.display="none"},n.onclick=function(e){i.value="",c.style.display="none",r.style.display="block"},s.onclick=function(e){o.style.display="none",u.style.display="block",i.style.display="block";const t=URL.createObjectURL(d);r.style.display="flex",r.style.justifyContent="center",r.style.gap="1rem",c.style.display="block",i.src=t}}function de(e,t,n,o,l,s,i,r,c){const a=new FileReader;let d=e.target.files[0],u=e.target.parentElement.parentElement.parentElement.parentElement.parentElement;d&&(a.onload=function(e){t.src=e.target.result,o.style.display="block",u.style.display="none"},a.readAsDataURL(d)),l.onclick=function(e){t.value="",o.style.display="none"},s.onclick=function(e){o.style.display="none",u.style.display="block",i.style.display="block";const t=URL.createObjectURL(d);r.style.display="flex",r.style.justifyContent="center",r.style.gap="1rem",c.style.display="block",i.src=t},n.onclick=function(e){i.value="",c.style.display="none",r.style.display="block"}}$(document).ready((function(){let t=$("#groupcreate"),n=document.querySelector("#groupmodalpost"),o=document.querySelector("#grouppostsubmit"),l=document.getElementById("groupPost-preview-cancel"),s=$("#groupclose"),i=document.querySelector(".groupPostfile-input-container"),r=document.querySelector("#groupPostparentmodalpreview"),c=document.querySelector("#groupPostmodalpreview");$("#home").click((function(){$("#sidebar").toggleClass("visible")})),$("#sidebarCancel").click((function(){$("#sidebar").toggleClass("visible")})),t.click((function(){n.style.display="block",document.querySelector("#id_insidegroupcontent").focus()})),s.click((function(){n.style.display="none"})),null!==document.querySelector("#groupcreate_id_post_file")&&document.querySelector("#groupcreate_id_post_file").addEventListener("change",(e=>{ae(e,ie,l,le,ce,re,c,i,r)}));let d=document.querySelector("#group-preview-cancel"),u=document.querySelector("#modalpreview"),y=document.querySelector("#parentmodalpreview");document.querySelector("#group_id_file").addEventListener("change",(e=>{ae(e,ie,d,le,ce,re,u,se,y)})),$("#groupsubmit").on("click",(function(){let t=$("#id_name").val(),n=$("#id_description").val(),o=new FormData;o.append("csrfmiddlewaretoken",L),o.append("name",t),o.append("description",n),$("#group_id_file")[0]&&o.append("cover_photo",$("#group_id_file")[0].files[0]),$.ajax({method:"POST",url:`${e}/create-group/`,data:o,processData:!1,contentType:!1,success:function(e){!1===e.success?Toastify({text:"Group creation failed",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast():(window.location.reload(),Toastify({text:"Group creation successfull",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast())},error:function(e){}})})),null!==l&&(l.onclick=function(e){c.value="",r.style.display="none",se.style.display="block"}),null!==o&&o.addEventListener("click",(async e=>{e.preventDefault();let t=document.querySelector("#groupcreate_id_post_file"),o=document.querySelector("#id_insidegroupcontent").value;const l=new FormData;null!==o&&l.append("text",o),t.files.length>0&&l.append("file",t.files[0]);const s=await fetch(`${a}/post-on-group/${groupname}/`,{method:"POST",body:l,headers:{"X-CSRFToken":L}});s.ok?(n.style.display="none",201===s.status?(Toastify({text:"Post successfull ",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),window.location.reload()):Toastify({text:"Post successfull, waiting for approval ",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),document.querySelector("#id_insidegroupcontent").value="",document.querySelector("#groupcreate_id_post_file").value=""):Toastify({text:"Post unsuccessfull, please try again later ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()}))})),$(document).ready((function(){let t=$(".likeholder");$.ajaxSetup({headers:{"X-CSRFToken":L}}),$(".like-button").on("click",(function(){let n=$(this).data("post-id"),o=$(this);$.ajax({url:`${e}/like_post/`,method:"POST",data:{post_id:n},dataType:"json",success:function(e){if(e.like_count>1&&t.text(e.like_count),"like"===e.status)o.css("color","rgb(220, 38, 38)"),_.send(JSON.stringify({message:`${w} just liked your photo`,receiver:e.receiver,postId:n,sender:w,type:"likepost"}));else{"light"===localStorage.getItem("mode")?o.css("color","#0d2438"):o.css("color","white")}},error:function(){alert("Error occurred while processing your request.")}})})),$(".group-like-button").on("click",(function(){let n=$(this).data("post-id"),o=$(this);$.ajax({url:`${e}/group_like_post/`,method:"POST",data:{post_id:n},dataType:"json",success:function(e){if(e.like_count>1&&t.text(e.like_count),"like"===e.status)o.css("color","rgb(220, 38, 38)");else{"light"===localStorage.getItem("mode")?o.css("color","#0d2438"):o.css("color","white")}},error:function(){alert("Error occurred while processing your request.")}})}))}));const ue=document.querySelector("#leftnavmessage"),ye=(document.querySelector("#topmessagenav"),document.querySelector("#baseuserid").innerHTML),pe=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws/chat/${ye}/ `;new WebSocket(pe).onmessage=function(e){let t=JSON.parse(e.data);if("initialmessage"===t.type&&"/messages/"===window.location.pathname&&ne(t.online),"chat_message"===t.type){if(ne(t.online),"/messages/"===window.location.pathname)localStorage.removeItem("count");else if(""!==t.message&&(N++,localStorage.setItem("count",N)),N>=1){let e=document.querySelector("#messagenotif"),t=document.querySelector("#messagenotif2");null!==e&&(e.innerHTML=N,e.style.display="flex",e.style.color="white",e.style.justifyContent="center",e.style.alignItems="center"),null!==t&&(t.innerHTML=N,t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center")}}if("typing"===t.type){let e=document.querySelector("#messagebody");null!==e&&(e.innerHTML="Typing...",e.style.color="green")}if("canceltyping"===t.type){let e=document.querySelector("#messagebody");null!==e&&(e.innerHTML=Y,e.style.color="#0D2438")}},ue&&(ue.onclick=()=>{localStorage.removeItem("count"),ne()}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector("#modal"),n=document.querySelector("#submit"),o=document.querySelector("#statussubmit"),l=document.querySelector("#statusmodal"),s=document.querySelector("#status"),i=document.querySelector("#button"),r=document.querySelector("#statusbutton"),c=document.querySelector("#id_filepost"),a=document.querySelector("#id_filestatus"),d=document.getElementById("postparentmodalpreview"),u=document.querySelector(".file-input-container"),y=document.getElementById("postmodalpreview"),p=document.getElementById("post-preview-cancel"),m=document.getElementById("statusparentmodalpreview"),g=document.querySelector(".status-file-input-container"),f=document.getElementById("statusmodalpreview"),h=document.getElementById("status-preview-cancel");i.addEventListener("click",(()=>{t.style.display="none"})),r.addEventListener("click",(()=>{l.style.display="none"})),c.addEventListener("change",(e=>de(e,ie,p,le,ce,re,y,u,d))),n.addEventListener("click",(async t=>{t.preventDefault();const n=new FormData(document.querySelector("#postform"));c.files.length>0&&n.append("file",c.files[0]);(await fetch(`${e}/create_post/`,{method:"POST",body:n,headers:{"X-CSRFToken":"{{ csrf_token }}"}})).ok?(Toastify({text:"Post successfull",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),window.location.reload()):Toastify({text:"Post unsuccessfull, please try again later ",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()})),s&&s.addEventListener("click",(function(){l.style.display="block",document.querySelector("#status_content").focus()})),a.addEventListener("change",(e=>de(e,ie,h,le,ce,re,f,g,m))),o&&o.addEventListener("click",(async t=>{t.preventDefault();const n=new FormData(document.querySelector("#statusform"));a.files.length>0&&n.append("file",a.files[0]);(await fetch(`${e}/create_status/`,{method:"POST",body:n,headers:{"X-CSRFToken":"{{ csrf_token }}"}})).ok?(window.location.reload(),Toastify({text:"Status created",duration:3e3,newWindow:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast()):(Toastify({text:"An error occured! try again later",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),l.style.display="none")}))})),window.addEventListener("load",(function(){document.querySelector("#loadingmodal").style.display="none"}));